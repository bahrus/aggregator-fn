!function(){const t=(t,e)=>{let s;return function(){clearTimeout(s),s=setTimeout(()=>t.apply(this,arguments),e)}};const e="disabled";const s="input";class i extends(function(t){return class extends t{constructor(){super(...arguments),this._evCount={}}static get observedAttributes(){return[e]}get disabled(){return this._disabled}set disabled(t){this.attr(e,t,"")}attr(t,e,s){this[(e?"set":"remove")+"Attribute"](t,s||e)}to$(t){const e=t%2;return(t-e)/2+"-"+e}incAttr(t){const e=this._evCount;t in e?e[t]++:e[t]=0,this.attr("data-"+t,this.to$(e[t]))}attributeChangedCallback(t,s,i){switch(t){case e:this._disabled=null!==i}}de(t,e,s=!1){const i=t+(s?"":"-changed"),r=new CustomEvent(i,{detail:e,bubbles:!0,composed:!1});return this.dispatchEvent(r),this.incAttr(i),r}_upgradeProperties(t){t.forEach(t=>{if(this.hasOwnProperty(t)){let e=this[t];delete this[t],this[t]=e}})}}}(HTMLElement)){constructor(){super(...arguments),this._aggregator=null}static get is(){return"aggregator-fn"}static get observedAttributes(){return super.observedAttributes.concat([s])}get input(){return this._input}set input(t){this._input=t,this.aggregate()}get value(){return this._value}set value(t){this._value=t,this.de("value",{value:t})}get aggregator(){return this._aggregator}set aggregator(t){this._aggregator=t,this.aggregate()}aggregate(){void 0===this._input||void 0===this._aggregator||null===this._aggregator||this._disabled||(this._input.__this=this,this.value=this._aggregator(this._input))}attributeChangedCallback(t,e,i){switch(t){case s:this.input=JSON.parse(i)}super.attributeChangedCallback(t,e,i),this.aggregate()}connectedCallback(){this.style.display="none",this._upgradeProperties(["disabled",s]),this.getS()}getS(){this._script=this.querySelector("script"),this._script?this.eval():setTimeout(()=>{this.getS()},10)}eval(){const e=function(t,e){const s=t.innerHTML.trim();if(s.startsWith("(")||s.startsWith(e)){const t=self.xtal_latx_ied;if(void 0!==t)return t(s);{const t=s.indexOf("=>"),i=["(",")","{","}"];let r=s.substr(0,t).replace(e,"").trim();i.forEach(t=>r=r.replace(t,""));const n=s.substr(t+2);return{args:r.split(",").map(t=>t.trim()),body:n}}}return null}(this._script,"fn = ");if(null===e)return;e.args.forEach(e=>{"__this"!==e&&function(e,s,i="input"){let r=e._debouncers;r||(r=e._debouncers={});let n=r[i];n||(n=r[i]=t(t=>{t[i]=Object.assign({},t[i])},10)),Object.defineProperty(e,s,{get:function(){return this["_"+s]},set:function(t){this["_"+s]=t,this[i]?(this[i][s]=t,n(this)):this[i]={[s]:t}},enumerable:!0,configurable:!0})}(this,e)});const s=this._script.innerHTML.trim().replace("fn = ",""),r=i._count++,n=`\nvar af = customElements.get('${i.is}');\naf['fn_' + ${r}] = ${s}\n        `,a=document.createElement("script");a.type="module",a.innerHTML=n,document.head.appendChild(a),this.attachAggregator(r)}attachAggregator(t){const e=i["fn_"+t];void 0!==e?this.aggregator=e:setTimeout(()=>{this.attachAggregator(t)},10)}}i._count=0,function(t){let e=t.is;customElements.get(e)?console.warn("Already registered "+e):customElements.define(e,t)}(i)}();