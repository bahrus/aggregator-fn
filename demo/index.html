<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div style="height:600px">
        <label for="operation">Operation:</label>
        <input type="text" name="operation" value="derive">
        <p-d on="input" to="aggregator-fn{operation}"></p-d>
        <label for="expression">Expression:</label>
        <input type="text" name="expression" value="x^2">
        <p-d on="input" to="aggregator-fn{expression}"></p-d>
        <aggregator-fn>
            <script nomodule>
                ({operation, expression}) => {
                    return `https://newton.now.sh/${operation}/${encodeURI(expression)}`
                }  
            </script>
        </aggregator-fn>
        <p-d on="value-changed" to="{href}"></p-d>
        <xtal-fetch fetch></xtal-fetch>
        <p-d on="fetch-complete" to="{input}"></p-d>
        <xtal-json-editor options="{}" height="300px"></xtal-json-editor>

        <script type="module" src="https://unpkg.com/aggregator-fn@0.0.1/aggregator-fn.js?module"></script>
        <script type="module" src="https://unpkg.com/xtal-fetch@0.0.47/xtal-fetch.js"></script>
        <script type="module" src="https://unpkg.com/p-d.p-u@0.0.69/p-d.p-u.js"></script>
        <script type="module" src="https://unpkg.com/xtal-json-editor@0.0.29/xtal-json-editor.js"></script>
    </div>
</body>
</html>